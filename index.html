<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FLV Player</title>
    <script src="https://cdn.jsdelivr.net/npm/flv.js/dist/flv.min.js"></script>
</head>
<body>
    <video id="videoElement" controls style="width:100%;height:auto;"></video>

    <script>
        const params = new URLSearchParams(window.location.search);
        const realUrl = params.get("url");

        if (!realUrl) {
            document.body.innerHTML = "Missing video url parameter";
        } else if (flvjs.isSupported()) {
            var videoElement = document.getElementById('videoElement');
            var flvPlayer = flvjs.createPlayer({
                type: 'flv',
                url: 'https://flv.oceanliangcn.workers.dev/?url=' + encodeURIComponent(realUrl)
            });
            flvPlayer.attachMediaElement(videoElement);
            flvPlayer.load();
            flvPlayer.play();
        } else {
            alert("浏览器不支持 flv.js");
        }
    </script>
</body>
</html>
